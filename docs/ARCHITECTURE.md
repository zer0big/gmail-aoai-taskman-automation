# Email2ADO ì•„í‚¤í…ì²˜ ì„¤ê³„ ë¬¸ì„œ

## ğŸ“‹ ê°œìš”

ì´ ë¬¸ì„œëŠ” Gmail ê¸°ë°˜ ì´ë©”ì¼ ìë™í™” ì‹œìŠ¤í…œì˜ ì•„í‚¤í…ì²˜ë¥¼ **Azure Well-Architected Framework (WAF)** 5ëŒ€ ì›ì¹™ì— ë§ì¶° ì„¤ê³„í•œ ë‚´ìš©ì„ ì„¤ëª…í•©ë‹ˆë‹¤.

## ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Email2ADO ìë™í™” ì‹œìŠ¤í…œ                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  Gmail   â”‚â”€â”€â”€â–¶â”‚  Logic App Standard â”‚â”€â”€â”€â–¶â”‚  Azure DevOps     â”‚      â”‚
â”‚  â”‚  INBOX   â”‚    â”‚  (Stateful Flow)    â”‚    â”‚  Work Items       â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                           â”‚                                              â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚         â–¼                â–¼                â–¼                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚  â”‚ Table Storageâ”‚ â”‚ Azure OpenAI â”‚ â”‚ MS Teams     â”‚                     â”‚
â”‚  â”‚ (ì¤‘ë³µ ì²´í¬)   â”‚ â”‚ GPT-4o       â”‚ â”‚ ì•Œë¦¼ ì±„ë„    â”‚                     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ Azure Well-Architected Framework ì ìš©

### 1ï¸âƒ£ Reliability (ì‹ ë¢°ì„±)

> **ëª©í‘œ**: ì¥ì•  ë°œìƒ ì‹œì—ë„ ì‹œìŠ¤í…œì´ ì •ìƒ ë™ì‘í•˜ê³  ë³µêµ¬ ê°€ëŠ¥

#### ì ìš© ì‚¬í•­

| í•­ëª© | êµ¬í˜„ ë‚´ìš© | ìœ„ì¹˜ |
|------|----------|------|
| **Retry Policy** | ëª¨ë“  HTTP ì•¡ì…˜ì— Exponential Backoff ì ìš© | `workflow.json` |
| **ì¤‘ë³µ ì²˜ë¦¬ ë°©ì§€** | Table Storage ê¸°ë°˜ Message ID ì¤‘ë³µ ì²´í¬ | `Scope_Duplicate_Check` |
| **Graceful Degradation** | ì¼ë¶€ ì‹¤íŒ¨ ì‹œì—ë„ í•µì‹¬ ê¸°ëŠ¥ ìœ ì§€ | `runAfter: ["Succeeded", "Failed", "Skipped"]` |
| **ìƒíƒœ ì¶”ì ** | Processing â†’ Completed/Failed ìƒíƒœ ê´€ë¦¬ | `Update_TableStorage_Status_*` |

#### Retry Policy ì„¤ì •

```json
{
  "retryPolicy": {
    "type": "exponential",
    "count": 3,
    "interval": "PT5S",
    "maximumInterval": "PT30S",
    "minimumInterval": "PT5S"
  }
}
```

### 2ï¸âƒ£ Security (ë³´ì•ˆ)

> **ëª©í‘œ**: ë°ì´í„°ì™€ ì‹œìŠ¤í…œì„ ìœ„í˜‘ìœ¼ë¡œë¶€í„° ë³´í˜¸

#### ì ìš© ì‚¬í•­

| í•­ëª© | êµ¬í˜„ ë‚´ìš© | ìœ„ì¹˜ |
|------|----------|------|
| **Managed Identity** | Logic App MSIë¡œ Azure ë¦¬ì†ŒìŠ¤ ì ‘ê·¼ | `logic-app.bicep` |
| **Key Vault í†µí•©** | ADO PAT ë“± ë¯¼ê° ì •ë³´ Key Vault ì €ì¥ | `local.settings.template.json` |
| **HTTPS ì „ìš©** | ëª¨ë“  í†µì‹  TLS 1.2+ ê°•ì œ | `storage.bicep` |
| **OAuth 2.0** | Gmail, Teams, ADO ì»¤ë„¥í„° OAuth ì¸ì¦ | `api-connections.bicep` |
| **V1 Connection + MSI** | API Connectionì— Logic App MSIë¡œ ì ‘ê·¼ (Contributor ì—­í• ) | `api-connections.bicep` |

#### MSI ì¸ì¦ ì˜ˆì‹œ

```json
{
  "authentication": {
    "type": "ManagedServiceIdentity",
    "audience": "https://storage.azure.com/"
  }
}
```

### 3ï¸âƒ£ Cost Optimization (ë¹„ìš© ìµœì í™”)

> **ëª©í‘œ**: í´ë¼ìš°ë“œ ë¹„ìš© íš¨ìœ¨ì„± ê·¹ëŒ€í™”

#### ì ìš© ì‚¬í•­

| í•­ëª© | êµ¬í˜„ ë‚´ìš© | ì˜ˆìƒ íš¨ê³¼ |
|------|----------|----------|
| **WS1 Plan** | Workflow Standard 1 (ìµœì†Œ ì‚¬ì–‘) | ì›” ~$150 |
| **ì¤‘ë³µ ì²´í¬** | ë¶ˆí•„ìš”í•œ AI í˜¸ì¶œ/Work Item ìƒì„± ë°©ì§€ | AI ë¹„ìš© ì ˆê° |
| **Standard LRS** | ê°œë°œ í™˜ê²½ ìŠ¤í† ë¦¬ì§€ ë³µì œ ìµœì†Œí™” | ìŠ¤í† ë¦¬ì§€ ë¹„ìš© ì ˆê° |
| **íƒœê·¸ ê¸°ë°˜ ë¹„ìš© ì¶”ì ** | CostCenter íƒœê·¸ ì ìš© | ë¹„ìš© ê°€ì‹œì„± í™•ë³´ |

### 4ï¸âƒ£ Operational Excellence (ìš´ì˜ ìš°ìˆ˜ì„±)

> **ëª©í‘œ**: íš¨ìœ¨ì ì¸ ìš´ì˜ê³¼ ì§€ì†ì  ê°œì„ 

#### ì ìš© ì‚¬í•­

| í•­ëª© | êµ¬í˜„ ë‚´ìš© | ìœ„ì¹˜ |
|------|----------|------|
| **Scope ê¸°ë°˜ êµ¬ì¡°** | ë…¼ë¦¬ì  ë‹¨ìœ„ë¡œ ì•¡ì…˜ ê·¸ë£¹í™” | `workflow.json` |
| **ìƒì„¸ ë¡œê¹…** | ëª¨ë“  ë‹¨ê³„ì—ì„œ êµ¬ì¡°í™”ëœ ë¡œê·¸ ì¶œë ¥ | `Log_*` ì•¡ì…˜ |
| **ì—ëŸ¬ í•¸ë“¤ë§** | ì¤‘ì•™ ì§‘ì¤‘ì‹ ì—ëŸ¬ ì²˜ë¦¬ Scope | `Scope_Error_Handler` |
| **IaC (Bicep)** | ì¸í”„ë¼ ì½”ë“œí™”ë¡œ ì¬í˜„ ê°€ëŠ¥í•œ ë°°í¬ | `infra/` |
| **Application Insights** | ì›Œí¬í”Œë¡œìš° ì‹¤í–‰ ëª¨ë‹ˆí„°ë§ | `logic-app.bicep` |

#### Scope êµ¬ì¡°

```
Scope_Initialize_Variables    â†’ ë³€ìˆ˜ ì´ˆê¸°í™”
    â†“
Scope_Duplicate_Check        â†’ ì¤‘ë³µ ì²´í¬
    â†“
Scope_Core_Processing        â†’ í•µì‹¬ ì²˜ë¦¬ (AI + ADO)
    â†“ (ì„±ê³µ)                 â†“ (ì‹¤íŒ¨)
Scope_Notification           Scope_Error_Handler
```

### 5ï¸âƒ£ Performance Efficiency (ì„±ëŠ¥ íš¨ìœ¨ì„±)

> **ëª©í‘œ**: ì‹œìŠ¤í…œ ìš”êµ¬ì‚¬í•­ì„ íš¨ìœ¨ì ìœ¼ë¡œ ì¶©ì¡±

#### ì ìš© ì‚¬í•­

| í•­ëª© | êµ¬í˜„ ë‚´ìš© | íš¨ê³¼ |
|------|----------|------|
| **Stateful ì›Œí¬í”Œë¡œìš°** | ì¥ì‹œê°„ ì‹¤í–‰ ì§€ì›, ìƒíƒœ ì§€ì† | ì•ˆì •ì„± |
| **Chunked Transfer** | ëŒ€ìš©ëŸ‰ ë°ì´í„° ìŠ¤íŠ¸ë¦¬ë° ì²˜ë¦¬ | ë©”ëª¨ë¦¬ íš¨ìœ¨ |
| **1ë¶„ í´ë§** | Gmail íŠ¸ë¦¬ê±° ê°„ê²© ìµœì í™” | ì ì‹œì„± vs ë¹„ìš© ê· í˜• |
| **Null ì•ˆì „ ì²˜ë¦¬** | `coalesce()` í•¨ìˆ˜ë¡œ null ë°©ì§€ | ëŸ°íƒ€ì„ ì˜¤ë¥˜ ê°ì†Œ |

## ğŸ“Š ì›Œí¬í”Œë¡œìš° ìƒì„¸ ì„¤ê³„

### ì²˜ë¦¬ íë¦„

```
1. Gmail ìƒˆ ë©”ì¼ ë„ì°©
2. ë³€ìˆ˜ ì´ˆê¸°í™” (null ì•ˆì „ ì²˜ë¦¬)
3. ì¤‘ë³µ ì²´í¬ (Table Storage ì¡°íšŒ)
   - ì¤‘ë³µ: ë¡œê·¸ í›„ ì •ìƒ ì¢…ë£Œ
   - ì‹ ê·œ: ê³„ì† ì§„í–‰
4. ë©”ì¼ ID ë“±ë¡ (Status: Processing)
5. AI ë¶„ì„ (Azure OpenAI GPT-4o)
6. ADO Work Item ìƒì„±
7. Work Item í•„ë“œ ì—…ë°ì´íŠ¸ (AssignedTo, Tags)
8. ì²˜ë¦¬ ì™„ë£Œ ìƒíƒœ ì—…ë°ì´íŠ¸ (Status: Completed)
9. Teams ì•Œë¦¼ ì „ì†¡
10. [ì—ëŸ¬ ì‹œ] ì—ëŸ¬ í•¸ë“¤ëŸ¬ ì‹¤í–‰
    - ì—ëŸ¬ ë¡œê¹…
    - ìƒíƒœ ì—…ë°ì´íŠ¸ (Status: Failed)
    - ì—ëŸ¬ ì•Œë¦¼ ì „ì†¡
    - ì›Œí¬í”Œë¡œìš° ì‹¤íŒ¨ ì¢…ë£Œ
```

### Table Storage ìŠ¤í‚¤ë§ˆ

| í•„ë“œ | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| PartitionKey | string | `yyyy-MM` í˜•ì‹ (ì›”ë³„ íŒŒí‹°ì…˜) |
| RowKey | string | Gmail Message ID (URL ì¸ì½”ë”©) |
| Subject | string | ì´ë©”ì¼ ì œëª© |
| SenderEmail | string | ë°œì‹ ì ì´ë©”ì¼ |
| ReceivedTimeKST | string | ìˆ˜ì‹  ì‹œê°„ (KST) |
| ProcessedTime | datetime | ì²˜ë¦¬ ì‹œê°„ (UTC) |
| Source | string | `Gmail` (ê³ ì •ê°’) |
| Status | string | `Processing`, `Completed`, `Failed` |
| WorkItemId | int | ìƒì„±ëœ ADO Work Item ID |
| ErrorMessage | string | ì—ëŸ¬ ë©”ì‹œì§€ (ì‹¤íŒ¨ ì‹œ) |

## ğŸ” ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

### ì¸ì¦ íë¦„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     OAuth 2.0      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Gmail     â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ â”‚ API Conn.   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚ Access Policy
                                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     MSI Auth       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Logic App   â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ â”‚ Azure AD    â”‚
â”‚   (MSI)     â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ MSI Token
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Table       â”‚     â”‚ Azure       â”‚     â”‚ Key Vault   â”‚
â”‚ Storage     â”‚     â”‚ OpenAI      â”‚     â”‚ (Secrets)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ë¯¼ê° ì •ë³´ ê´€ë¦¬

| í•­ëª© | ì €ì¥ ìœ„ì¹˜ | ì ‘ê·¼ ë°©ì‹ |
|------|----------|----------|
| ADO PAT | Key Vault | `@Microsoft.KeyVault(...)` ì°¸ì¡° |
| Storage Key | Logic App App Settings | MSI ì „í™˜ ê¶Œì¥ |
| OAuth Tokens | API Connection | ìë™ ê´€ë¦¬ |

## ğŸ“š ì°¸ì¡° ë¬¸ì„œ

- [Azure Well-Architected Framework](https://learn.microsoft.com/en-us/azure/well-architected/)
- [Logic Apps ì—ëŸ¬ í•¸ë“¤ë§](https://learn.microsoft.com/en-us/azure/logic-apps/error-exception-handling)
- [Logic Apps Retry Policy](https://learn.microsoft.com/en-us/azure/logic-apps/logic-apps-exception-handling#retry-policies)
- [Gmail ì»¤ë„¥í„°](https://learn.microsoft.com/en-us/connectors/gmail/)

## ğŸ“ ë³€ê²½ ì´ë ¥

| ë²„ì „ | ë‚ ì§œ | ì‘ì„±ì | ë‚´ìš© |
|------|------|--------|------|
| 2.1.0 | 2026-01-29 | azure-mvp | WAF 5 Pillars ê¸°ë°˜ ì¬ì„¤ê³„ |
| 2.0.0 | 2026-01-29 | azure-mvp | Gmail íŠ¸ë¦¬ê±°ë¡œ ì „í™˜ |
